
<!-- insert the template stylesheets of the site template -->
<% content_for :template_stylesheet do %>
    <%= stylesheet_link_tag @site.site_template.template_stylesheets %>
<% end %>

<!-- render the navigation bar in the location chosen by the user -->
<% content_for :navigation_bar do %>
    <%= render 'layouts/hotentic_engine/shared_partials/navigation' %>
<% end %>

<%= render @site.site_template.full_template_path do %>
    <%= render @page.full_page_template_path %>
    <%= yield :script_page %>
<% end %>

<!-- render the edition popup -->
<%= render 'layouts/hotentic_engine/shared_partials/edition_popup' %>


<script type="text/javascript">
    $("text-editor").click(edit);

    function edit() {
        var eltId = $(this).attr('id');
        $(".popup").show();
        CKEDITOR.instances['content_editor'].setData($(this).text());
        $(".reference_container").val(eltId).hide();
        $(".popup form").attr("action", "/engine/edition/textes/" + eltId);
    }
</script>